<% provide(:title, "Robots | Index") %>
<h1>List of robots</h1><br>
<% if sign_in? %>
	<% if is_leader? || is_admin? %>
		<%= link_to 'New Robot', new_robot_path %>
	<% end %>
<% end %>
<table>
  <thead>
    <tr>
	
      <th>Name
		<a href= robots ><button id="sortbuttonT" name="NameR" onclick="myFunctionSort(this.name)" ><img src="/icons/a_z.png"></button></a>
		<a href= robots ><button id="sortbuttonD" name="NameRbis" onclick="myFunctionSort(this.name)" ><img src="/icons/z_a.png"></button></a></th>	
	  
	  
      <th>Category
		<a href= robots ><button id="sortbuttonT" name="CategoryRbis" onclick="myFunctionSort(this.name)" ><img src="/icons/a_z.png"></button></a>
		<a href= robots ><button id="sortbuttonD" name="CategoryR" onclick="myFunctionSort(this.name)" ><img src="/icons/z_a.png"></button></a></th>		  
	  
	  
      <th>Team
		<a href= robots ><button id="sortbuttonT" name="TeamR" onclick="myFunctionSort(this.name)" ><img src="/icons/a_z.png"></button></a>
		<a href= robots ><button id="sortbuttonD" name="TeamRbis" onclick="myFunctionSort(this.name)" ><img src="/icons/z_a.png"></button></a></th>	  

      <th  colspan="3"></th>

	  <% if sign_in? %>
		<% if is_admin? %>
			<th class="column-sed" colspan="2"></th>
		<% end %>
	<% end %>
    </tr>
  </thead>

  <tbody>
    
	<% idRobs = []%>
    <% @robots.each do |robot| %>
		<% idRobs << robot.id %>
	<% end %>


	<% allRobotIdSort=sortId(idRobs) %>
	<% if allRobotIdSort != [] %>
		<% for ii in 0..(allRobotIdSort.size-1) %>
			<% robot=Robot.find_by_id(allRobotIdSort[ii]) %>
		  <tr>
			<td><%= link_to robot.name, robot %></td>
			<td><%= robot.category %></td>
			<td><%= link_to Team.find(robot.team_id).name, Team.find(robot.team_id) %></td>
			<% if sign_in? %>
				<% if is_admin? || is_leader(Team.find(robot.team_id).name) %>
					<td><%= (link_to 'Show', robot) + ' | ' + (link_to 'Edit', edit_robot_path(robot)) + ' | ' + (link_to 'Delete', robot, method: :delete, data: { confirm: 'Are you sure?' })  %></td>
				<% else %>
					<td><%= link_to 'Show', robot %></td>
				<% end %>
			<% end %>
		  </tr>
		<% end %>
    <% end %>
  </tbody>
</table>

<br>



<script>
	function myFunctionSort(clicked_id) {
		$.cookie("Sort",clicked_id,{path:'/' });
	}
</script>
