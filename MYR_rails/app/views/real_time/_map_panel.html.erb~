<div id="map" style='width: 100%; height: 500px;'></div>
	</div> 
	<script>
	var mapOptions = {
		mapTypeId: google.maps.MapTypeId.HYBRID,
		center: new google.maps.LatLng(53.2590145, -9.0294632),
		zoom: 14,
		zoomControl: true,
		zoomControlOptions: {
		  style: google.maps.ZoomControlStyle.SMALL,
		  position: google.maps.ControlPosition.BOTTOM_LEFT
		},
		mapTypeControl: true,
		mapTypeControlOptions: {
		  style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,
		  position: google.maps.ControlPosition.BOTTOM_LEFT
		},
		streetViewControl: false,
		panControl: false,
		scaleControl: true,
		overviewMapControl: false
	}

	handler = Gmaps.build('Google');
	handler.buildMap({ provider: mapOptions,internal: {id: 'map'}}, function(){

  markers = handler.addMarkers(<%=raw @hash.to_json %>);

  <% #TO IMPROVE %>
  <% robots = cookies[:robotslist]%>
  <% tabrobots = robots.split(",")%>
  <% tracks = [] %>
  <%for i in 0..tabrobots.length-1%>
  	<%tracks.push(Robot.find_by_id(tabrobots[i]).tracker_id)%>
  <% end %>
  
  polylines = [];
  <% for j in 0..tracks.length-1%>
  	polylines = handler.addPolylines([<%=raw @hash2[tracks[j]].to_json %>],{ strokeColor: '<%= @colors[tracks[j]] %>', strokeWeight: 1 });
  <% end %>
  
  handler.bounds.extendWith(markers);
  handler.bounds.extendWith(polylines);
  handler.fitMapToBounds();
});
</script>
